### 关于javascript执行上下文/作用域链/闭包/一等公民
---

#####[一、什么是执行上下文？]()

执行上下文：它是比较抽象的概念，就是当前JavaScript代码被解析和执行时所在环境
所以：在JavaScript中运行任何的代码都是在执行上下文中运行的。

>$\color{green}{执行上下文有三种类型：}$
- 第一种类型：全局执行上下文
记住全局执行上下文，只有一个即一个程序中只能有一个全局执行上下文，如果是在浏览器中，那么全局对象就是window对象，this指向就是这个全局对象

- 第二种类型：函数执行上下文
函数执行上下文可以存在多个，甚至是无数个；只有在函数被调用时才会被创建（函数执行上下文），每次调用函数都会创建一个新的执行上下文

- 第三种类型：Eval函数执行上下文
记住这是运行在eval函数中的代码，只有在eval函数中的代码才有eval函数执行上下文


理解了执行上下文（即环境），那么需要了解在JavaScript程序中的执行流，以及控制机制（执行堆栈）流程。

>$\color{green}{执行栈}$

每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就会被推入到一个环境栈种。函数执行完毕后，栈将其环境弹出，把控制权返回给之前的执行环境。

其实执行堆栈（调用堆栈）具有后进先出结构的堆栈，该结构用于存储在代码执行执行期间创建的所有执行上下文。

##### 压栈出栈的过程——执行上下文栈

当JavaScript引擎运行JavaScript代码时它会创建一个全局执行上下文并将其push到当前执行堆栈。（函数还没解析或者是执行、调用）仅存在全局执行上下文，每当引擎发现函数调用时，引擎都会为该函数创建一个新的函数执行上下文，并将其推入到堆栈的顶部（当前执行栈的栈顶）

当引擎执行其执行上下文位于堆栈顶部的函数之后，将其对应的函数执行上下文将会从堆栈中弹出，并且控件到达当前堆栈中位于其下方的上下文（如果有下一个函数的话）

##### 执行上下文的生命周期：

- 创建过程：1.生成变量对象，2.建立作用域链，3.确定this的指向。
- 执行过程：1.变量赋值，2.函数引用，3.执行其他代码。
- 销毁阶段：执行完毕后出栈，，等待被回收。


#####[二、函数是一等公民如何理解？]()

在编程中，一等公民可以作为函数参数，可以作为函数返回值，也可以赋值给变量。

字符串，在几乎所有编程语言中都是一等公民，字符串可以做为函数参数，可以作为函数返回值，也可以赋值给变量。

函数在JavaScript中是一等公民。一等公民具有最高的优先权，当函数被看作是“一等公民”， 就是函数优先。

>$\color{green}{函数自身特性}$
- 它可以存储在变量中
- 它可以存储在数组元素中
- 它可以存储在对象属性中
- 它可以根据需要来创建
- 它可以被传递到其它函数中
- 它可以被其它函数返回

>$\color{green}{一等公民}$

- 函数作为函数参数
- 将函数赋值给变量
- 函数作为函数返回值
- 函数为第一公民是函数编程的必要条件